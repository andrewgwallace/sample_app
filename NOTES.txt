

The colde in Listing 7.3.3 has been removed from the '_error_messages.html.erb' file as it only references the @user variable explicity.
Instead a form variable 'f' is passed to the partial and access to the object is done through 'f.object'.  This allows the error messages to be customized depending on the object.

For example:

In:  'form_for(@user) do |f|', f.object is @user.

Here is the code from 7.3.3

<!-- 7.3.3 Signup error messages.   -->
<% if @user.errors.any? %>
  <div id="error_explanation">
    <div class="alert alert-danger">
      The form contains <%= pluralize(@user.errors.count, "error") %>.
    </div>
    <ul>
      <% @user.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>